<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>iFrames vs Web Components â€” Performance Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>iFrames vs Web Components â€” Performance Dashboard</h1>
    <div class="controls">
      <button id="refreshBtn">Refresh</button>
      <label>
        Filter implementation:
        <select id="implFilter">
          <option value="all">All</option>
          <option value="iframe">iframe</option>
          <option value="web-component">web-component</option>
        </select>
      </label>
      <label>
        Instances:
        <select id="countFilter">
          <option value="all">All</option>
          <option value="1">1</option>
          <option value="5">5</option>
          <option value="10">10</option>
        </select>
      </label>
    </div>
  </header>

  <main>
    <section class="intro">
      <h2>About this dashboard</h2>
      <p>
        This dashboard aggregates performance runs comparing two implementations of the same sports scoreboard widget:
        an iframe-based version and a Web Component. Test pages load <strong>1</strong>, <strong>5</strong>, or <strong>10</strong>
        instances to observe scalability. The automated tests (Playwright) open these pages, collect metrics, and save results here.
      </p>
      <div class="link-grid">
        <div class="link-card">
          <div class="link-title">iframe test pages</div>
          <ul>
            <li><a href="/iframe/tests/single.html" target="_blank" rel="noopener noreferrer">1 instance (single.html)</a></li>
            <li><a href="/iframe/tests/five.html" target="_blank" rel="noopener noreferrer">5 instances (five.html)</a></li>
            <li><a href="/iframe/tests/ten.html" target="_blank" rel="noopener noreferrer">10 instances (ten.html)</a></li>
          </ul>
        </div>
        <div class="link-card">
          <div class="link-title">web-component test pages</div>
          <ul>
            <li><a href="/web-component/tests/single.html" target="_blank" rel="noopener noreferrer">1 instance (single.html)</a></li>
            <li><a href="/web-component/tests/five.html" target="_blank" rel="noopener noreferrer">5 instances (five.html)</a></li>
            <li><a href="/web-component/tests/ten.html" target="_blank" rel="noopener noreferrer">10 instances (ten.html)</a></li>
          </ul>
        </div>
      </div>
    </section>

    <section>
      <h2>Comparison â€” median by implementation</h2>
      <div id="compareTable" class="compare"></div>
    </section>

    <section>
      <h2>Summary Statistics</h2>
      <div class="stats-guide">
        <p><strong>How to read these metrics:</strong></p>
        <ul>
          <li><strong>p50 (median):</strong> The typical performance â€” 50% of runs were faster, 50% slower. Use this to understand normal user experience.</li>
          <li><strong>p95:</strong> The "worst-case" performance â€” only 5% of runs were slower. Critical for understanding outliers and setting SLAs.</li>
          <li><strong>Ïƒ (standard deviation):</strong> Measures consistency. Lower values = more predictable performance; higher values = more variability.</li>
        </ul>
        <p><em>ðŸ’¡ Lower values are better for all metrics (time, memory). Higher FPS is better.</em></p>
      </div>
      <div id="summary" class="summary-grid">
        <div class="metric">
          <div class="label">Total runs</div>
          <div class="value" id="totalRuns">â€“</div>
        </div>
        <div class="metric stat-detail">
          <div class="label">Load Time (ms)</div>
          <div class="stat-row"><span class="stat-label">p50:</span><span class="value" id="loadP50">â€“</span></div>
          <div class="stat-row"><span class="stat-label">p95:</span><span class="value" id="loadP95">â€“</span></div>
          <div class="stat-row"><span class="stat-label">Ïƒ:</span><span class="value" id="loadStd">â€“</span></div>
        </div>
        <div class="metric stat-detail">
          <div class="label">FCP (ms)</div>
          <div class="stat-row"><span class="stat-label">p50:</span><span class="value" id="fcpP50">â€“</span></div>
          <div class="stat-row"><span class="stat-label">p95:</span><span class="value" id="fcpP95">â€“</span></div>
          <div class="stat-row"><span class="stat-label">Ïƒ:</span><span class="value" id="fcpStd">â€“</span></div>
        </div>
        <div class="metric stat-detail">
          <div class="label">Memory (MB)</div>
          <div class="stat-row"><span class="stat-label">p50:</span><span class="value" id="memP50">â€“</span></div>
          <div class="stat-row"><span class="stat-label">p95:</span><span class="value" id="memP95">â€“</span></div>
          <div class="stat-row"><span class="stat-label">Ïƒ:</span><span class="value" id="memStd">â€“</span></div>
        </div>
        <div class="metric stat-detail">
          <div class="label">FPS</div>
          <div class="stat-row"><span class="stat-label">p50:</span><span class="value" id="fpsP50">â€“</span></div>
          <div class="stat-row"><span class="stat-label">p95:</span><span class="value" id="fpsP95">â€“</span></div>
          <div class="stat-row"><span class="stat-label">Ïƒ:</span><span class="value" id="fpsStd">â€“</span></div>
        </div>
      </div>
    </section>

    <section>
      <h2>Runs</h2>
      <div id="emptyState" class="empty" hidden>No data files found yet. Run the tests to generate results.</div>
      <table id="resultsTable" class="results">
        <thead>
          <tr>
            <th>Time</th>
            <th>Implementation</th>
            <th>Instances</th>
            <th>Test Page</th>
            <th>Load (ms)</th>
            <th>FP (ms)</th>
            <th>FCP (ms)</th>
            <th>DOM Interactive (ms)</th>
            <th>DOM Complete (ms)</th>
            <th>Avg Memory (MB)</th>
            <th>Avg FPS</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
